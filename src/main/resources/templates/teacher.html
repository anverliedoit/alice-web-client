<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
	<meta charset="ISO-8859-1" />
	<link rel="stylesheet" href="../css/bootstrap/bootstrap.min.css" th:href="@{/css/bootstrap/bootstrap.min.css}"/>
	<link rel="stylesheet" href="../css/style.css" th:href="@{/css/style.css}"/>
	<title>Teacher information</title>
	</head>
	<body>
		<div class="loading-pane">
			<img th:src="@{/image/simple-loading.gif}" id="image-loading" align="middle"/>
		</div>
		<nav class="navbar navbar-default navbar-fixed-top" id="navbar-default">
			<div class="container">
				<div class="navbar-header">
					<a class="navbar-brand" href="#">Alice Project</a>
				</div>
				
				<ul class=" nav navbar-nav">
				  <li class="home"><a href="#"><span></span> Class</a></li>
				   <li class="home"><a href="/teacher"><span ></span> Teacher</a></li>
				    <li class="home"><a href="/student"><span ></span> Student</a></li>
				     <li class="home"><a href="/section"><span ></span> Section</a></li>
				     <li class="home"><a href="#"><span ></span> Schedule</a></li>
				    <li class="home"><a href="/department"><span></span> Department</a></li>
				</ul>
				<ul class="nav navbar-nav navbar-right">

				  <li><a href="#"><span class="glyphicon glyphicon-log-in"></span> Logout</a></li>
				</ul>
			</div>
		</nav>
			<div class="container" id="table-container">
				<h2 id="label-title"><a href="/teacher">Teacher</a></h2>
				<div class="row">
					<div class="col-md-9">
						<button type="button" class="btn" id="btn-add-teacher" data-toggle="modal" data-target="#add-teacher-modal">
							<span class="glyphicon glyphicon-plus"></span> Add Teacher
						</button>
					</div>
					<div class="col-md-3">
						<form class="form-inline">
							<div class="form-group">
								<label class="sr-only" for="exampleInputAmount">Teacher</label>
								<div class="input-group">
									<input type="text" class="form-control" id="teacher-query" placeholder="Teacher id, name or email" />
									<div class="input-group-addon" id="btn-search"><span class="glyphicon glyphicon-search"></span></div>
								</div>
							  </div>
						</form>
					</div>
				</div>
				<br />
				<br />
				<div id="table-cus">
					<table class="table">
						<thead>
						  <tr class="">
							<th>ID</th>
							<th>FirstName</th>
							<th>MiddleName</th>
							<th>LastName</th>
							<th>Email</th>
					
						  </tr>
						</thead>
						<tbody>
							<tr  th:each="teacher, iterStat : ${teacherList}" th:class="${iterStat.even} ? 'active' : 'default'">
								<td th:text="${teacher.id}" />
								<td th:text="${teacher.firstName}" />
								<td th:text="${teacher.middleName}" />
								<td th:text="${teacher.lastName}" />
								<td><span class="label label-primary" th:text="${teacher.email}"></span></td>
								<td>
									<button type="button" class="btn btn-default" data-toggle="modal" th:attr="data-target='#update-teacher-modal-' + ${teacher.id}">
										<span class="glyphicon glyphicon-pencil"></span> Update
									</button>
									<button th:value="${teacher.id}" type="submit" class="btn btn-default" id="btn-delete"> 
										<span class="glyphicon glyphicon-remove"></span> Delete
									</button>
									<a th:href="'/teacher/view?id=' + ${teacher.id}">
										<button type="button" class="btn btn-default" id="btn-view">
												<span class="glyphicon glyphicon-zoom-in"></span> View
										</button>
									</a>
								</td>
								<td>
									<!-- Modal -->
									<div class="modal fade" th:id="'update-teacher-modal-' + ${teacher.id}" role="dialog">
										<div class="modal-dialog">
											<!-- Modal content-->
											<div class="modal-content">
												<div class="modal-header">
													<h4 class="modal-title">Update a Teacher</h4>
												</div>
												<div class="modal-body">
													<form action="/teacher/update" method="post" class="form-update-teacher">
														<input type="hidden" name="id" th:value="${teacher.id}" />
														<div class="form-group">
															<label for="firstName">FirstName:</label>
															<input name="firstName" type="text" class="form-control" id="firstName" th:value="${teacher.firstName}"/>
														</div>
														<div class="form-group">
															<label for="middleName">MiddleName:</label>
															<input name="middleName" type="text" class="form-control" id="middleName" th:value="${teacher.middleName}"/>
														</div>
														<div class="form-group">
															<label for="lastName">LastName:</label>
															<input name="lastName" type="text" class="form-control" id="lastName" th:value="${teacher.lastName}"/>
														</div>
														<div class="form-group">
															<label for="email">Email:</label>
															<input name="email" type="email" class="form-control" id="email" th:value="${teacher.email}"/>
														</div>
														<div class="form-group">
															<label>Department</label>
															<div>
																<select class="form-control" name="departmentId">
																	<option value="0">None</option>
																	<option th:each="department, iterStat : ${departmentList}" 
																	th:selected="${teacher.department} != null ? (${teacher.department.id} == ${department.id} ? 'selected' : 'no') :'no'" 
																	th:value="${department.id}" th:text="${department.name}" />
																</select>
															</div>
														</div>
														<button type="submit" class="btn btn-default">Update</button>
													</form>
												</div>
												<div class="modal-footer">
												  <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
												</div>
											</div>
										</div>
									</div>
								</td>
							</tr>
						</tbody>
				  </table>
				</div>
			</div>
			<!-- Modal -->
			<div class="modal fade" id="add-teacher-modal" role="dialog">
				<div class="modal-dialog">
			
					<!-- Modal content-->
					<div class="modal-content">
						<div class="modal-header">
							<h4 class="modal-title">Create a Teacher</h4>
						</div>
						<div class="modal-body">
							<form action="/teacher/add" method="post">
								<div class="form-group">
									<label for="firstName">FirstName:</label>
									<input name="firstName" type="text" class="form-control" id="firstName" />
								</div>
								<div class="form-group">
									<label for="middleName">MiddleName:</label>
									<input name="middleName" type="text" class="form-control" id="middleName" />
								</div>
								<div class="form-group">
									<label for="lastName">LastName:</label>
									<input name="lastName" type="text" class="form-control" id="lastName" />
								</div>
								<div class="form-group">
									<label for="email">Email:</label>
									<input name="email" type="email" class="form-control" id="email" />
								</div>
								<div class="form-group">
									<label>Department</label>
									<div>
										<select class="form-control" name="departmentId">
											<option value="0">None</option>
											<option th:each="department, iterStat : ${departmentList}" 
											th:value="${department.id}" th:text="${department.name}" />
										</select>
									</div>
								</div>
								<button type="submit" class="btn btn-default">Add</button>
							</form>
						</div>
						<div class="modal-footer">
							<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
						</div>
					</div>
				</div>
			</div>

	<script src="../js/jquery-3.2.1.min.js" th:src="@{/js/jquery-3.2.1.min.js}"></script>
	<script src="../js/bootstrap/bootstrap.min.js" th:src="@{/js/bootstrap/bootstrap.min.js}"></script>
	<script>
		$(document).ready(function(){
			var loading = $(".loading-pane");
			$(document).on('click', 'button[id="btn-delete"]', function() {
				var id = $(this).val();
				if (confirm('Are you sure you want to delete the teacher with id : ' + id)) {
					loading.show();
					$.post("/teacher/delete", {id : id}, function(data, status) {
						$("#table-cus").html(data);	
						loading.hide();
						hideMessage(8000);
					});	
				}
			});
			
			$('#btn-search').click(function() {
				var input = $("#teacher-query").val();
				if(input.trim() != "") {
					loading.show();
					$.post("/teacher/get", {query : input}, function(data, status) {
						$("#table-cus").html(data);
						loading.hide();
						hideMessage(8000, 2000);
					});
				}
			});
		});
		
		function hideMessage(duration) {
			setTimeout(function() {
				$('#response-message').fadeOut(2000);
			},duration);
		}
	</script>
	</body>
</html>